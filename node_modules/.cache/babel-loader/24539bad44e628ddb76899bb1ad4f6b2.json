{"ast":null,"code":"import _objectSpread from \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _inherits from \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/wrapNativeSuper\";\nvar _jsxFileName = \"D:\\\\dolar_react-master\\\\dolar_react-master2\\\\src\\\\containers\\\\Dashboard\\\\Home.js\";\n\nfunction _wrapRegExp(re, groups) { _wrapRegExp = function (re, groups) { return new BabelRegExp(re, undefined, groups); }; var _RegExp = _wrapNativeSuper(RegExp); var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = _RegExp.call(this, re, flags); _groups.set(_this, groups || _groups.get(re)); return _this; } _inherits(BabelRegExp, _RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = []; args.push.apply(args, arguments); if (typeof args[args.length - 1] !== \"object\") { args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nimport React, { Component } from \"react\";\nimport { Http, HttpNode } from \"../../axiosInstances\";\nimport DolarPrices from \"../../components/HomePage/DolarPrices/DolarPrices\";\nimport DolarAmmounts from \"../../components/HomePage/DolarAmounts/DolarAmounts\";\nimport CloseImage from '../../assets/img/moneda.png';\nimport Average from '../../assets/img/moneda.png';\nimport clockRewind from '../../assets/img/rewind-time.png';\nimport DolarSpot from '../shared/DolarSpot/DolarSpot';\nimport Currencies from \"../../components/HomePage/Currencies/Currency\";\nimport News from \"../../components/HomePage/News/News\";\nimport Footer from \"../../components/shared/Footer/Footer\";\nimport PreFooter from '../../components/shared/PreFooter/PreFooter';\nimport ChartSwitcher from '../../components/Dashboard/ChartSwitcher/ChartSwitcher';\nimport classes from './Home.css';\nconst CURRENCY_REGEX = new RegExp(_wrapRegExp(/(\\w{3})\\s+\\/\\s+(\\w{3})\\s+([\\d.]+)\\s*([\\d.+-]+)/, {\n  from: 1,\n  to: 2,\n  value: 3,\n  change: 4\n}));\nconst BVC_REGEX = new RegExp(_wrapRegExp(/([A-Za-z]+)(\\d*\\.*\\d{1,3},\\d{2})(-*\\d+\\.*\\d*)/, {\n  stock: 1,\n  stock_value: 2,\n  stock_change: 3\n}));\n\nclass DashboardHome extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      largeMenu: true,\n      market: 'spot',\n      dolarPrices: {},\n      dolarAmmounts: {},\n      currencies: [],\n      bvc: [],\n      news: [],\n      mobile: false\n    };\n    this.interval = null;\n    this.MARKET_MAP = {\n      'spot': 71,\n      'nextday': 76\n    };\n\n    this.mapAmmountPrices = stats => {\n      const ammountPrices = {\n        totalAmmount: stats.totalAmmount,\n        latestAmmount: stats.latestAmmount,\n        avgAmmount: stats.avgAmmount,\n        minAmmount: stats.minAmmount,\n        maxAmmount: stats.maxAmmount,\n        transactions: stats.transactions\n      };\n\n      const newState = _objectSpread({}, this.state, {\n        dolarAmmounts: ammountPrices\n      });\n\n      this.setState(newState);\n    };\n\n    this.mapCurrencyData = data => {\n      const newState = _objectSpread({}, this.state, {\n        currencies: data\n      });\n\n      this.setState(newState);\n    };\n\n    this.mapNews = news => {\n      const newState = _objectSpread({}, this.state, {\n        news: news\n      });\n\n      this.setState(newState);\n    };\n\n    this.mapBVCData = data => {\n      const newState = _objectSpread({}, this.state, {\n        bvc: data\n      });\n\n      this.setState(newState);\n    };\n\n    this.changeMarket = market => {\n      this.setState({\n        market: market\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (window.innerWidth <= 600) {\n      this.setState({\n        mobile: true\n      });\n    }\n\n    this.interval = setInterval(this.onMount.bind(this), 1000 * 15);\n    this.onMount();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.match.params.market !== this.props.match.params.market) {\n      clearInterval(this.interval);\n      this.onMount();\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  dias() {\n    var now = new Date();\n    var now2 = '' + now;\n    var dias = 0;\n\n    if (now2.substring(0, 3) == 'Sat') {\n      dias = 1;\n    } else if (now2.substring(0, 3) == 'Sun') {\n      dias = 2;\n    }\n\n    var semanaEnMilisegundos = 1000 * 60 * 60 * 24 * dias;\n    let suma = now.getTime() - semanaEnMilisegundos;\n    return new Date(suma);\n  }\n\n  onMount() {\n    console.log('refreshinng');\n    console.log('Refreshing data at ' + new Date());\n    let now = this.dias(); //let now = new Date();\n\n    const month = now.getMonth() < 9 ? \"0\".concat(parseInt(now.getMonth()) + 1) : parseInt(now.getMonth()) + 1;\n    HttpNode.post(\"seticap/api/estadisticas/estadisticasPromedioCierre/\", {\n      fecha: \"\".concat(now.getFullYear(), \"-\").concat(month, \"-\").concat(now.getDate()),\n      mercado: this.MARKET_MAP[this.props.match.params.market],\n      // USD for now\n      delay: 0\n    }).then(response => {\n      this.setState(_objectSpread({}, this.state, {\n        closePrice: response.data.data.close,\n        avgPrice: response.data.data.avg\n      }));\n    });\n    HttpNode.post(\"seticap/api/estadisticas/estadisticasPrecioMercado/\", {\n      fecha: \"\".concat(now.getFullYear(), \"-\").concat(month, \"-\").concat(now.getDate()),\n      mercado: this.MARKET_MAP[this.props.match.params.market],\n      //USD for now\n      delay: 0\n    }).then(response => {\n      this.setState(_objectSpread({}, this.state, {\n        dolarPrices: {\n          trm: {\n            price: response.data.data.trm,\n            change: response.data.data.trmchange\n          },\n          openPrice: {\n            price: response.data.data.open,\n            change: response.data.data.openchange\n          },\n          minPrice: {\n            price: response.data.data.low,\n            change: response.data.data.lowchange\n          },\n          maxPrice: {\n            price: response.data.data.high,\n            change: response.data.data.highchange\n          }\n        }\n      }));\n    });\n    HttpNode.post(\"seticap/api/estadisticas/estadisticasMontoMercado/\", {\n      fecha: \"\".concat(now.getFullYear(), \"-\").concat(month, \"-\").concat(now.getDate()),\n      mercado: this.MARKET_MAP[this.props.match.params.market],\n      //USD for now.\n      delay: 0\n    }).then(response => {\n      this.setState(_objectSpread({}, this.state, {\n        dolarAmmounts: {\n          totalAmmount: response.data.data.sum,\n          latestAmmount: response.data.data.close,\n          avgAmmount: response.data.data.avg,\n          minAmmount: response.data.data.low,\n          maxAmmount: response.data.data.high,\n          transactions: response.data.data.count\n        }\n      }));\n    });\n    Http.get('/news/rss/').then(response => {\n      const news = response.data.map(elem => {\n        return _objectSpread({}, elem, {\n          body: elem.body,\n          headline: elem.headline,\n          id: elem.id\n        });\n      });\n      this.mapNews(news);\n    });\n    HttpNode.get(\"seticap/api/cma/monedas/\").then(response => {\n      const parser = new DOMParser();\n      let parserTable = parser.parseFromString(response.data, \"text/html\");\n      const CurrencyData = Array.from(parserTable.getElementsByTagName(\"tr\")).map(tr => {\n        if (CURRENCY_REGEX.test(tr.innerText)) {\n          const results = CURRENCY_REGEX.exec(tr.innerText);\n          return results.slice(1);\n        }\n\n        return null;\n      }).filter(Boolean);\n      this.mapCurrencyData(CurrencyData);\n    });\n    HttpNode.get(\"seticap/api/bvc/acciones/\").then(response => {\n      const parser = new DOMParser();\n      let parserTable = parser.parseFromString(response.data, \"text/html\");\n      const CurrencyData = Array.from(parserTable.getElementsByTagName(\"tr\")).map(tr => {\n        if (BVC_REGEX.test(tr.innerText)) {\n          const results = BVC_REGEX.exec(tr.innerText);\n          return results.slice(1);\n        }\n\n        return null;\n      }).filter(Boolean);\n      this.mapBVCData(CurrencyData);\n    });\n    HttpNode.get(\"seticap/api/bvc/indices/\").then(response => {\n      this.setState(_objectSpread({}, this.state, {\n        stockTable: response.data.table\n      }));\n    });\n  }\n\n  render() {\n    const market = this.MARKET_MAP[this.props.match.params.market];\n    return React.createElement(\"div\", {\n      id: \"content-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"page-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.FirstRow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel media middle pad-all\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pad-hor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"clock\",\n      src: clockRewind,\n      style: {\n        width: '52px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"media-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mar-no text-semibold\",\n      style: {\n        fontSize: '1.4em',\n        position: 'absolute',\n        top: '25%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Informaci\\xF3n del d\\xF3lar en tiempo real.\"), React.createElement(\"p\", {\n      className: \"mar-no\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel panel-primary panel-colorful media middle pad-all\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pad-hor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      style: {\n        width: '52px'\n      },\n      src: CloseImage,\n      alt: \"Cierre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"media-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-2x mar-no text-semibold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, this.state.closePrice), React.createElement(\"p\", {\n      className: [\"mar-no font-weight-bold\", classes.Label].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Cierre\")))), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel panel-primary panel-colorful media middle pad-all\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pad-hor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      style: {\n        width: '52px'\n      },\n      src: Average,\n      alt: \"Promedio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"media-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-2x mar-no text-semibold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, this.state.avgPrice), React.createElement(\"p\", {\n      className: [\"mar-no font-weight-bold\", classes.Label].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Promedio\")))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"demo-panel-network\",\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pad-all\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.state.mobile ? '' : \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(DolarSpot, {\n      key: \"spot\",\n      market: market,\n      dataDelay: 0,\n      delay: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, Object.keys(this.state.dolarPrices).length ? React.createElement(DolarPrices, {\n      dolarPrices: this.state.dolarPrices,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, Object.keys(this.state.dolarAmmounts).length ? React.createElement(DolarAmmounts, {\n      dolarAmmounts: this.state.dolarAmmounts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"iframe\", {\n      frameBorder: \"0\",\n      scrolling: \"no\",\n      width: \"100%\",\n      height: \"509\",\n      src: \"https://api.stockdio.com/visualization/financial/charts/v1/marketoverviewchart?app-key=395DFC50D7D9415DA5A662933D57E22F&wp=1&addVolume=false&showUserMenu=false&culture=Spanish-LatinAmerica&captionColor=25476a&&titleColor=ffffff&title=Monedas&stockExchange=BVC&currencies=USD%2FJPY%3BUSD%2FEUR%3BUSD%2FBRL%3BUSD%2FMXN%3BGBP%2FUSD&logoMaxHeight=20&logoMaxWidth=90&includeEquities=false&includeIndices=false&includeCommodities=false&includeCurrencies=true&includeLogo=true&includeEquitiesSymbol=true&includeEquitiesName=false&includeIndiceSymbol=false&includeIncidesName=false&includeCommoditiesSymbol=false&includeCommoditiesName=true&includeCurrenciesSymbol=true&includeCurrenciesName=false&allowSort=true&includePrice=true&includeChange=true&includePercentChange=false&includeTrend=true&includeVolume=false&showHeader=true&showBorderAndTitle=true&displayPrices=Lines&allowPeriodChange=false&chartHeight=200px&width=100%25&height=100%25&intraday=true&onload=1df409df-b181-2f7b-034f-8d5f9ea6bbc1&width=800&height=420\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(ChartSwitcher, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(News, {\n      news: this.state.news,\n      dashboard: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, \"Informaci\\xF3n con 1 minuto de retraso | * No incluye registros\"))), React.createElement(PreFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default DashboardHome;","map":{"version":3,"sources":["D:\\dolar_react-master\\dolar_react-master2\\src\\containers\\Dashboard\\Home.js"],"names":["React","Component","Http","HttpNode","DolarPrices","DolarAmmounts","CloseImage","Average","clockRewind","DolarSpot","Currencies","News","Footer","PreFooter","ChartSwitcher","classes","CURRENCY_REGEX","RegExp","BVC_REGEX","DashboardHome","state","largeMenu","market","dolarPrices","dolarAmmounts","currencies","bvc","news","mobile","interval","MARKET_MAP","mapAmmountPrices","stats","ammountPrices","totalAmmount","latestAmmount","avgAmmount","minAmmount","maxAmmount","transactions","newState","setState","mapCurrencyData","data","mapNews","mapBVCData","changeMarket","componentDidMount","window","innerWidth","setInterval","onMount","bind","componentDidUpdate","prevProps","prevState","snapshot","match","params","props","clearInterval","componentWillUnmount","dias","now","Date","now2","substring","semanaEnMilisegundos","suma","getTime","console","log","month","getMonth","parseInt","post","fecha","getFullYear","getDate","mercado","delay","then","response","closePrice","close","avgPrice","avg","trm","price","change","trmchange","openPrice","open","openchange","minPrice","low","lowchange","maxPrice","high","highchange","sum","count","get","map","elem","body","headline","id","parser","DOMParser","parserTable","parseFromString","CurrencyData","Array","from","getElementsByTagName","tr","test","innerText","results","exec","slice","filter","Boolean","stockTable","table","render","FirstRow","width","fontSize","position","top","Label","join","Object","keys","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Http, HttpNode } from \"../../axiosInstances\";\nimport DolarPrices from \"../../components/HomePage/DolarPrices/DolarPrices\";\nimport DolarAmmounts from \"../../components/HomePage/DolarAmounts/DolarAmounts\";\nimport CloseImage from '../../assets/img/moneda.png'\nimport Average from '../../assets/img/moneda.png';\nimport clockRewind from '../../assets/img/rewind-time.png';\nimport DolarSpot from '../shared/DolarSpot/DolarSpot';\nimport Currencies from \"../../components/HomePage/Currencies/Currency\";\nimport News from \"../../components/HomePage/News/News\";\nimport Footer from \"../../components/shared/Footer/Footer\";\nimport PreFooter from '../../components/shared/PreFooter/PreFooter';\nimport ChartSwitcher from '../../components/Dashboard/ChartSwitcher/ChartSwitcher';\nimport classes from './Home.css';\n\nconst CURRENCY_REGEX = new RegExp(\n  /(?<from>\\w{3})\\s+\\/\\s+(?<to>\\w{3})\\s+(?<value>[\\d.]+)\\s*(?<change>[\\d.+-]+)/\n);\nconst BVC_REGEX = new RegExp(\n  /(?<stock>[A-Za-z]+)(?<stock_value>\\d*\\.*\\d{1,3},\\d{2})(?<stock_change>-*\\d+\\.*\\d*)/\n);\n\nclass DashboardHome extends Component {\n  state = {\n    largeMenu: true,\n    market: 'spot',\n    dolarPrices: {},\n    dolarAmmounts: {},\n    currencies: [],\n    bvc: [],\n    news: [],\n    mobile: false\n  };\n\n  interval = null;\n\n  MARKET_MAP = {\n    'spot': 71,\n    'nextday': 76\n  }\n\n  mapAmmountPrices = stats => {\n    const ammountPrices = {\n      totalAmmount: stats.totalAmmount,\n      latestAmmount: stats.latestAmmount,\n      avgAmmount: stats.avgAmmount,\n      minAmmount: stats.minAmmount,\n      maxAmmount: stats.maxAmmount,\n      transactions: stats.transactions\n    };\n    const newState = {\n      ...this.state,\n      dolarAmmounts: ammountPrices\n    };\n    this.setState(newState);\n  };\n\n  mapCurrencyData = data => {\n    const newState = {\n      ...this.state,\n      currencies: data\n    };\n    this.setState(newState);\n  };\n\n  mapNews = news => {\n    const newState = {\n      ...this.state,\n      news: news\n    };\n    this.setState(newState);\n  };\n\n  mapBVCData = data => {\n    const newState = {\n      ...this.state,\n      bvc: data\n    };\n    this.setState(newState);\n  };\n\n  componentDidMount() {\n    if (window.innerWidth <= 600) {\n      this.setState({ mobile: true })\n    }\n    this.interval = setInterval(this.onMount.bind(this), 1000 * 15);\n    this.onMount();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.match.params.market !== this.props.match.params.market) {\n      clearInterval(this.interval);\n      this.onMount();\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  dias(){\n    var now = new Date();\n    var now2=''+now;\n    var dias=0;\n\n    if(now2.substring(0, 3)=='Sat'){\n      dias=1;\n    }else if(now2.substring(0, 3)=='Sun'){\n      dias=2;\n    }\n\n    var semanaEnMilisegundos = 1000 * 60 * 60 * 24 * dias;\n    let suma = now.getTime() - semanaEnMilisegundos;\n    return new Date(suma);\n  }\n  onMount() {\n    console.log('refreshinng');\n    console.log('Refreshing data at ' + new Date());\n    let now = this.dias();//let now = new Date();\n    const month = now.getMonth() < 9 ? `0${(parseInt(now.getMonth()) + 1)}` : parseInt(now.getMonth()) + 1\n\n    HttpNode.post(`seticap/api/estadisticas/estadisticasPromedioCierre/`, {\n      fecha: `${now.getFullYear()}-${month}-${now.getDate()}`,\n      mercado: this.MARKET_MAP[this.props.match.params.market], // USD for now\n      delay: 0\n    }).then(response => {\n      this.setState({\n        ...this.state,\n        closePrice: response.data.data.close,\n        avgPrice: response.data.data.avg\n      })\n    });\n\n    HttpNode.post(`seticap/api/estadisticas/estadisticasPrecioMercado/`, {\n      fecha: `${now.getFullYear()}-${month}-${now.getDate()}`,\n      mercado: this.MARKET_MAP[this.props.match.params.market], //USD for now\n      delay: 0\n    }).then(response => {\n      this.setState({\n        ...this.state,\n        dolarPrices: {\n          trm: { price: response.data.data.trm, change: response.data.data.trmchange },\n          openPrice: { price: response.data.data.open, change: response.data.data.openchange },\n          minPrice: { price: response.data.data.low, change: response.data.data.lowchange },\n          maxPrice: { price: response.data.data.high, change: response.data.data.highchange }\n        }\n      })\n    })\n\n    HttpNode.post(`seticap/api/estadisticas/estadisticasMontoMercado/`, {\n      fecha: `${now.getFullYear()}-${month}-${now.getDate()}`,\n      mercado: this.MARKET_MAP[this.props.match.params.market], //USD for now.\n      delay: 0\n    }).then(response => {\n      this.setState({\n        ...this.state,\n        dolarAmmounts: {\n          totalAmmount: response.data.data.sum,\n          latestAmmount: response.data.data.close,\n          avgAmmount: response.data.data.avg,\n          minAmmount: response.data.data.low,\n          maxAmmount: response.data.data.high,\n          transactions: response.data.data.count\n        }\n      })\n    })\n\n    Http.get('/news/rss/').then(response => {\n      const news = response.data.map(elem => {\n        return {\n          ...elem,\n          body: elem.body,\n          headline: elem.headline,\n          id: elem.id\n        }\n      });\n      this.mapNews(news);\n    });\n\n    HttpNode.get(\"seticap/api/cma/monedas/\").then(response => {\n      const parser = new DOMParser();\n      let parserTable = parser.parseFromString(response.data, \"text/html\");\n      const CurrencyData = Array.from(parserTable.getElementsByTagName(\"tr\"))\n        .map(tr => {\n          if (CURRENCY_REGEX.test(tr.innerText)) {\n            const results = CURRENCY_REGEX.exec(tr.innerText);\n            return results.slice(1);\n          }\n          return null;\n        })\n        .filter(Boolean);\n      this.mapCurrencyData(CurrencyData);\n    });\n\n    HttpNode.get(\"seticap/api/bvc/acciones/\").then(response => {\n      const parser = new DOMParser();\n      let parserTable = parser.parseFromString(response.data, \"text/html\");\n      const CurrencyData = Array.from(parserTable.getElementsByTagName(\"tr\"))\n        .map(tr => {\n          if (BVC_REGEX.test(tr.innerText)) {\n            const results = BVC_REGEX.exec(tr.innerText);\n            return results.slice(1);\n          }\n          return null;\n        })\n        .filter(Boolean);\n      this.mapBVCData(CurrencyData);\n    });\n\n    HttpNode.get(\n      `seticap/api/bvc/indices/`\n    ).then(response => {\n      this.setState({\n        ...this.state,\n        stockTable: response.data.table\n      })\n    });\n  }\n\n  render() {\n    const market = this.MARKET_MAP[this.props.match.params.market];\n    return (\n      <div id=\"content-container\">\n\n        <div id=\"page-content\">\n          <div className={classes.FirstRow}>\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <div className=\"panel media middle pad-all\">\n                  <div className=\"media-left\">\n                    <div className=\"pad-hor\">\n                      <img alt=\"clock\" src={clockRewind} style={{ width: '52px' }}></img>\n                    </div>\n                  </div>\n                  <div className=\"media-body\">\n                    <p className=\"mar-no text-semibold\" style={{ fontSize: '1.4em', position: 'absolute', top: '25%' }}>\n                      Información del dólar en tiempo real.\n                    </p>\n                    <p className=\"mar-no\" />\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-md-3\">\n                <div className=\"panel panel-primary panel-colorful media middle pad-all\">\n                  <div className=\"media-left\">\n                    <div className=\"pad-hor\">\n                      <img style={{ width: '52px' }} src={CloseImage} alt=\"Cierre\"></img>\n                    </div>\n                  </div>\n                  <div className=\"media-body\">\n                    <p className=\"text-2x mar-no text-semibold\">\n                      {this.state.closePrice}\n                    </p>\n                    <p className={[\"mar-no font-weight-bold\", classes.Label].join(' ')}>Cierre</p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-md-3\">\n                <div className=\"panel panel-primary panel-colorful media middle pad-all\">\n                  <div className=\"media-left\">\n                    <div className=\"pad-hor\">\n                      <img style={{ width: '52px' }} src={Average} alt=\"Promedio\"></img>\n                    </div>\n                  </div>\n                  <div className=\"media-body\">\n                    <p className=\"text-2x mar-no text-semibold\">\n                      {this.state.avgPrice}\n                    </p>\n                    <p className={[\"mar-no font-weight-bold\", classes.Label].join(' ')}>Promedio</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row\">\n            <div className=\"col-lg-12\">\n              <div id=\"demo-panel-network\" className=\"panel\">\n                <div className=\"pad-all\">\n                  <div className={this.state.mobile ? '' : \"container-fluid\"}>\n                    <DolarSpot key=\"spot\" market={market} dataDelay={0} delay={0} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-3\">\n              {Object.keys(this.state.dolarPrices).length ? (\n                <DolarPrices dolarPrices={this.state.dolarPrices} />\n              ) : (\n                  \"\"\n                )}\n            </div>\n            <div className=\"col-md-4 col-sm-12\">\n              {Object.keys(this.state.dolarAmmounts).length ? (\n                <DolarAmmounts dolarAmmounts={this.state.dolarAmmounts} />\n              ) : (\n                  \"\"\n                )}\n            </div>\n            <div className=\"col-md-5\">\n                  <iframe frameBorder='0' scrolling='no' width=\"100%\" height=\"509\" src='https://api.stockdio.com/visualization/financial/charts/v1/marketoverviewchart?app-key=395DFC50D7D9415DA5A662933D57E22F&amp;wp=1&amp;addVolume=false&amp;showUserMenu=false&amp;culture=Spanish-LatinAmerica&amp;captionColor=25476a&amp;&amp;titleColor=ffffff&amp;title=Monedas&amp;stockExchange=BVC&amp;currencies=USD%2FJPY%3BUSD%2FEUR%3BUSD%2FBRL%3BUSD%2FMXN%3BGBP%2FUSD&amp;logoMaxHeight=20&amp;logoMaxWidth=90&amp;includeEquities=false&amp;includeIndices=false&amp;includeCommodities=false&amp;includeCurrencies=true&amp;includeLogo=true&amp;includeEquitiesSymbol=true&amp;includeEquitiesName=false&amp;includeIndiceSymbol=false&amp;includeIncidesName=false&amp;includeCommoditiesSymbol=false&amp;includeCommoditiesName=true&amp;includeCurrenciesSymbol=true&amp;includeCurrenciesName=false&amp;allowSort=true&amp;includePrice=true&amp;includeChange=true&amp;includePercentChange=false&amp;includeTrend=true&amp;includeVolume=false&amp;showHeader=true&amp;showBorderAndTitle=true&amp;displayPrices=Lines&amp;allowPeriodChange=false&amp;chartHeight=200px&amp;width=100%25&amp;height=100%25&amp;intraday=true&amp;onload=1df409df-b181-2f7b-034f-8d5f9ea6bbc1&width=800&height=420'></iframe>\n                  {/*<Currencies currencies={this.state.currencies} />*/}\n             </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-9\">\n              <ChartSwitcher />\n            </div>\n            <div className=\"col-md-3\">\n              <News news={this.state.news} dashboard={true} />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-12 text-center\">\n              Información con 1 minuto de retraso | * No incluye registros\n              </div>\n          </div>\n        </div>\n        <PreFooter></PreFooter>\n        <Footer></Footer>\n      </div>\n    );\n  }\n\n  changeMarket = (market) => {\n    this.setState({ market: market })\n  }\n}\n\nexport default DashboardHome;\n"]},"metadata":{},"sourceType":"module"}